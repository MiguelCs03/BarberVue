import{g as b,E as N,i as x,D as S,B as E,c as i,a as c,u as m,h as H,w as o,b as s,k as _,v as P,p as D,l as g,f as p,d as A,q as $,t as l,o as r,F as f,r as q,e as G,x as h}from"./app-SE4O8QdG.js";import{S as k,_ as C,a as I}from"./Card-6S7uMC2O.js";import{B as U}from"./Badge-Cq-G68wz.js";import{_ as z}from"./DataTable-DL0eouT8.js";import{r as O}from"./EyeIcon-DSM1MZJ6.js";import"./useTheme-otSVn3jk.js";import"./useAccessibility-DclxZ0zr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"flex flex-col md:flex-row gap-4 justify-between"},J={class:"flex gap-3"},K={key:0,class:"font-semibold",style:{color:"var(--color-primary)"}},R={key:1,style:{color:"var(--text-secondary)"}},W={class:"font-semibold"},X={key:0,class:"mt-4 flex justify-between items-center"},Y={style:{color:"var(--text-secondary)"}},Z={class:"flex gap-2"},ee=["innerHTML"],ce={__name:"Index",props:{citas:Object},setup(n){const w=n,d=b(""),u=b(""),v=N(),B=[{key:"cliente",label:"Cliente"},{key:"barbero",label:"Barbero"},{key:"fecha",label:"Fecha/Hora"},{key:"pago_inicial",label:"Pago Inicial"},{key:"porcentaje_cita",label:"Porcentaje"},{key:"estado",label:"Estado"}],L=[{label:"Ver",icon:O,handler:a=>$.visit(route("citas-admin.show",a.id)),variant:"primary"}],M=x(()=>w.citas.data),F=x(()=>{let a=M.value;if(d.value&&(a=a.filter(t=>t.estado===d.value)),u.value){const t=u.value.toLowerCase();a=a.filter(e=>(e.cliente||"").toLowerCase().includes(t)||(e.barbero||"").toLowerCase().includes(t))}return a}),T=a=>({pendiente:"warning",confirmada:"info",completada:"success",cancelada:"danger"})[a]||"default",V=a=>({pendiente:"Pendiente",confirmada:"Confirmada",completada:"Completada",cancelada:"Cancelada"})[a]||a;S(()=>{y()}),E(()=>v.props.flash,()=>{y()},{deep:!0});const y=()=>{const a=v.props.flash;a?.success&&k.fire({title:"¡Éxito!",text:a.success,icon:"success",confirmButtonColor:"var(--color-primary)",background:"var(--bg-primary)",color:"var(--text-primary)"}),a?.error&&k.fire({title:"Error",text:a.error,icon:"error",confirmButtonColor:"#EF4444",background:"var(--bg-primary)",color:"var(--text-primary)"})},j=a=>a||"";return(a,t)=>(r(),i(f,null,[c(m(H),{title:"Gestión de Citas"}),c(I,null,{default:o(()=>[t[4]||(t[4]=s("div",{class:"mb-6"},[s("h1",{class:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"}}," Gestión de Citas "),s("p",{style:{color:"var(--text-secondary)"}}," Administra las citas de los clientes ")],-1)),c(C,{class:"mb-6"},{default:o(()=>[s("div",Q,[s("div",J,[_(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),class:"input"},[...t[2]||(t[2]=[s("option",{value:""},"Todos los estados",-1),s("option",{value:"pendiente"},"Pendiente",-1),s("option",{value:"confirmada"},"Confirmada",-1),s("option",{value:"completada"},"Completada",-1),s("option",{value:"cancelada"},"Cancelada",-1)])],512),[[P,d.value]]),_(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),type:"text",placeholder:"Buscar cliente...",class:"input"},null,512),[[D,u.value]])]),c(m(g),{href:a.route("citas-admin.create"),class:"btn-primary whitespace-nowrap"},{default:o(()=>[...t[3]||(t[3]=[p(" + Nueva Cita ",-1)])]),_:1},8,["href"])])]),_:1}),c(C,null,{default:o(()=>[c(z,{columns:B,data:F.value,actions:L},{"cell-estado":o(({value:e})=>[c(U,{variant:T(e)},{default:o(()=>[p(l(V(e)),1)]),_:2},1032,["variant"])]),"cell-fecha_hora_inicio":o(({value:e})=>[p(l(j(e)),1)]),"cell-pago_inicial":o(({item:e})=>[e.pago_inicial>0?(r(),i("span",K," Bs. "+l(e.pago_inicial.toFixed(2)),1)):(r(),i("span",R," Sin adelanto "))]),"cell-barbero":o(({value:e})=>[s("span",W,l(e??"No Asignado"),1)]),"cell-porcentaje_cita":o(({item:e})=>[p(l(e.porcentaje_cita.toFixed(2)*100)+" % ",1)]),_:1},8,["data"]),n.citas.links&&n.citas.links.length>3?(r(),i("div",X,[s("div",Y," Mostrando "+l(n.citas.from)+" - "+l(n.citas.to)+" de "+l(n.citas.total),1),s("div",Z,[(r(!0),i(f,null,q(n.citas.links,e=>(r(),i(f,{key:e.label},[e.url?(r(),G(m(g),{key:0,href:e.url,class:h(["px-3 py-1 rounded",e.active?"btn-primary":"btn-secondary"]),innerHTML:e.label},null,8,["href","class","innerHTML"])):(r(),i("span",{key:1,class:h(["px-3 py-1 rounded btn-secondary opacity-50 cursor-not-allowed"]),innerHTML:e.label},null,8,ee))],64))),128))])])):A("",!0)]),_:1})]),_:1})],64))}};export{ce as default};
