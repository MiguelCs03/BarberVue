import{g as S,i as $,c as t,a as n,u as f,h as P,w as v,b as e,d as m,t as i,o as l,F as x,r as k,f as y,l as F,j as g,k as p,p as b,v as j,q as h}from"./app-SE4O8QdG.js";import{_ as w,a as Q}from"./Card-6S7uMC2O.js";import{B as H}from"./Badge-Cq-G68wz.js";import{r as M,a as I}from"./TrashIcon-DuKNbtIH.js";import"./useTheme-otSVn3jk.js";import"./useAccessibility-DclxZ0zr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"mb-6"},W={style:{color:"var(--text-secondary)"}},X={key:0},Y={class:"mb-4 pb-4 border-b",style:{borderColor:"var(--border-color)"}},Z={class:"text-2xl font-semibold",style:{color:"var(--text-primary)"}},ee={class:"mb-6"},oe={class:"flex justify-between items-center mb-4"},se=["onClick"],te={key:0,class:"space-y-2"},le={class:"flex items-center gap-3"},ae={style:{color:"var(--text-primary)"},class:"text-sm"},re={class:"flex gap-2"},ie=["onClick"],ne=["onClick"],de={key:1,class:"text-center py-4 text-sm",style:{color:"var(--text-secondary)"}},ue={class:"flex justify-between items-center mb-4"},ce=["onClick"],me={key:0,class:"space-y-2"},pe={class:"flex items-center gap-3"},ve={style:{color:"var(--text-primary)"},class:"text-sm"},be={key:0,class:"text-xs"},fe={key:0,style:{color:"var(--text-secondary)"},class:"text-xs"},ye=["onClick"],_e={key:1,class:"text-center py-4 text-sm",style:{color:"var(--text-secondary)"}},xe={key:1},he={class:"flex justify-between items-center mb-4"},ke={key:0,class:"space-y-3"},ge={class:"flex items-center gap-4"},we={style:{color:"var(--text-primary)"}},Ce={class:"flex gap-2"},Ee=["onClick"],Se={key:1,class:"text-center py-8",style:{color:"var(--text-secondary)"}},He={class:"flex justify-between items-center mb-4"},Ie={key:0,class:"mb-6 p-4 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"}},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={key:0},Ae={key:1},Ne={class:"md:col-span-2"},Ue={key:1,class:"space-y-3"},qe={class:"flex items-center gap-4"},De={style:{color:"var(--text-primary)"}},$e={key:0},Fe={key:0,style:{color:"var(--text-secondary)"},class:"text-sm"},Me=["onClick"],Be={key:2,class:"text-center py-8",style:{color:"var(--text-secondary)"}},Ge={class:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"}},ze={key:0},Le={class:"flex gap-2 justify-end"},Oe={type:"submit",class:"btn-primary"},Te={key:0},Je={key:1},Ze={__name:"Index",props:{horarios:{type:Array,default:()=>[]},excepciones:{type:Array,default:()=>[]},barberos:{type:Array,default:()=>[]},esAdmin:{type:Boolean,default:!1}},setup(_){const A=_,C=S(!1),c=S({fecha:"",es_disponible:!1,hora_inicio:"",hora_fin:"",motivo:""}),d=S({mostrar:!1,editando:!1,barberoId:null,horarioId:null,form:{dia_semana:"",hora_inicio:"",hora_fin:""}}),u=S({mostrar:!1,barberoId:null,form:{fecha:"",es_disponible:!1,hora_inicio:"",hora_fin:"",motivo:""}}),B=$(()=>[...A.horarios].sort((a,o)=>parseInt(a.dia_semana)-parseInt(o.dia_semana))),G=$(()=>[...A.excepciones].sort((a,o)=>new Date(o.fecha_raw)-new Date(a.fecha_raw))),z=()=>{h.post(route("horarios.excepciones.store"),c.value,{preserveScroll:!0,onSuccess:()=>{N()}})},N=()=>{C.value=!1,c.value={fecha:"",es_disponible:!1,hora_inicio:"",hora_fin:"",motivo:""}},L=a=>{d.value={mostrar:!0,editando:!1,barberoId:a,horarioId:null,form:{dia_semana:"",hora_inicio:"",hora_fin:""}}},O=(a,o)=>{d.value={mostrar:!0,editando:!0,barberoId:o,horarioId:a.id,form:{dia_semana:a.dia_semana,hora_inicio:a.hora_inicio,hora_fin:a.hora_fin}}},T=()=>{const a={...d.value.form,barbero_id:d.value.barberoId};d.value.editando?h.put(route("horarios.update",d.value.horarioId),{hora_inicio:a.hora_inicio,hora_fin:a.hora_fin},{preserveScroll:!0,onSuccess:()=>{E()}}):h.post(route("horarios.store"),a,{preserveScroll:!0,onSuccess:()=>{E()}})},E=()=>{d.value={mostrar:!1,editando:!1,barberoId:null,horarioId:null,form:{dia_semana:"",hora_inicio:"",hora_fin:""}}},J=a=>{u.value={mostrar:!0,barberoId:a,form:{fecha:"",es_disponible:!1,hora_inicio:"",hora_fin:"",motivo:""}}},K=()=>{const a={...u.value.form,barbero_id:u.value.barberoId};h.post(route("horarios.excepciones.store"),a,{preserveScroll:!0,onSuccess:()=>{V()}})},V=()=>{u.value={mostrar:!1,barberoId:null,form:{fecha:"",es_disponible:!1,hora_inicio:"",hora_fin:"",motivo:""}}},U=a=>{confirm("¿Estás seguro de eliminar este horario?")&&h.delete(route("horarios.destroy",a),{preserveScroll:!0})},q=a=>{confirm("¿Estás seguro de eliminar esta excepción?")&&h.delete(route("horarios.excepciones.destroy",a),{preserveScroll:!0})};return(a,o)=>(l(),t(x,null,[n(f(P),{title:"Gestión de Horarios"}),n(Q,null,{default:v(()=>[e("div",R,[o[14]||(o[14]=e("h1",{class:"text-3xl font-bold mb-2",style:{color:"var(--text-primary)"}}," Gestión de Horarios ",-1)),e("p",W,i(_.esAdmin?"Administra los horarios de todos los barberos":"Configura tu disponibilidad semanal y excepciones"),1)]),_.esAdmin?(l(),t("div",X,[(l(!0),t(x,null,k(_.barberos,s=>(l(),t("div",{key:s.id,class:"mb-8"},[n(w,null,{default:v(()=>[e("div",Y,[e("h2",Z,i(s.nombre),1)]),e("div",ee,[e("div",oe,[o[15]||(o[15]=e("h3",{class:"text-lg font-semibold",style:{color:"var(--text-primary)"}}," Horarios Semanales ",-1)),e("button",{onClick:r=>L(s.id),class:"btn-primary btn-sm"}," + Agregar Horario ",8,se)]),s.horarios.length>0?(l(),t("div",te,[(l(!0),t(x,null,k(s.horarios,r=>(l(),t("div",{key:r.id,class:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"}},[e("div",le,[n(H,{variant:"primary",class:"text-sm"},{default:v(()=>[y(i(r.dia_nombre),1)]),_:2},1024),e("span",ae,i(r.hora_inicio)+" - "+i(r.hora_fin),1)]),e("div",re,[e("button",{onClick:D=>O(r,s.id),class:"btn-secondary btn-sm"},[n(f(M),{class:"w-4 h-4"})],8,ie),e("button",{onClick:D=>U(r.id),class:"btn-danger btn-sm"},[n(f(I),{class:"w-4 h-4"})],8,ne)])]))),128))])):(l(),t("div",de," Sin horarios configurados "))]),e("div",null,[e("div",ue,[o[16]||(o[16]=e("h3",{class:"text-lg font-semibold",style:{color:"var(--text-primary)"}}," Excepciones ",-1)),e("button",{onClick:r=>J(s.id),class:"btn-primary btn-sm"}," + Agregar Excepción ",8,ce)]),s.excepciones.length>0?(l(),t("div",me,[(l(!0),t(x,null,k(s.excepciones,r=>(l(),t("div",{key:r.id,class:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"}},[e("div",pe,[n(H,{variant:r.es_disponible?"success":"danger",class:"text-sm"},{default:v(()=>[y(i(r.fecha),1)]),_:2},1032,["variant"]),e("div",null,[e("p",ve,[y(i(r.es_disponible?"Disponible":"No disponible")+" ",1),r.es_disponible&&r.hora_inicio?(l(),t("span",be," ("+i(r.hora_inicio)+" - "+i(r.hora_fin)+") ",1)):m("",!0)]),r.motivo?(l(),t("p",fe,i(r.motivo),1)):m("",!0)])]),e("button",{onClick:D=>q(r.id),class:"btn-danger btn-sm"},[n(f(I),{class:"w-4 h-4"})],8,ye)]))),128))])):(l(),t("div",_e," Sin excepciones configuradas "))])]),_:2},1024)]))),128))])):(l(),t("div",xe,[n(w,{class:"mb-6"},{default:v(()=>[e("div",he,[o[18]||(o[18]=e("h2",{class:"text-xl font-semibold",style:{color:"var(--text-primary)"}}," Horarios Semanales ",-1)),n(f(F),{href:a.route("horarios.create"),class:"btn-primary"},{default:v(()=>[...o[17]||(o[17]=[y(" + Agregar Horario ",-1)])]),_:1},8,["href"])]),_.horarios.length>0?(l(),t("div",ke,[(l(!0),t(x,null,k(B.value,s=>(l(),t("div",{key:s.id,class:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"}},[e("div",ge,[n(H,{variant:"primary"},{default:v(()=>[y(i(s.dia_nombre),1)]),_:2},1024),e("span",we,i(s.hora_inicio)+" - "+i(s.hora_fin),1)]),e("div",Ce,[n(f(F),{href:a.route("horarios.edit",s.id),class:"btn-secondary btn-sm"},{default:v(()=>[n(f(M),{class:"w-4 h-4"})]),_:1},8,["href"]),e("button",{onClick:r=>U(s.id),class:"btn-danger btn-sm"},[n(f(I),{class:"w-4 h-4"})],8,Ee)])]))),128))])):(l(),t("div",Se," No has configurado horarios. Agrega tu disponibilidad semanal. "))]),_:1}),n(w,null,{default:v(()=>[e("div",He,[o[19]||(o[19]=e("h2",{class:"text-xl font-semibold",style:{color:"var(--text-primary)"}}," Excepciones de Horario ",-1)),e("button",{onClick:o[0]||(o[0]=s=>C.value=!0),class:"btn-primary"}," + Agregar Excepción ")]),C.value?(l(),t("div",Ie,[o[27]||(o[27]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"}}," Nueva Excepción ",-1)),e("form",{onSubmit:g(z,["prevent"]),class:"space-y-4"},[e("div",Ve,[e("div",null,[o[20]||(o[20]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Fecha ",-1)),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>c.value.fecha=s),type:"date",class:"input w-full",required:""},null,512),[[b,c.value.fecha]])]),e("div",null,[o[22]||(o[22]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Estado ",-1)),p(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>c.value.es_disponible=s),class:"input w-full",required:""},[...o[21]||(o[21]=[e("option",{value:!1},"No disponible",-1),e("option",{value:!0},"Disponible con horario especial",-1)])],512),[[j,c.value.es_disponible]])]),c.value.es_disponible?(l(),t("div",je,[o[23]||(o[23]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Hora Inicio ",-1)),p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>c.value.hora_inicio=s),type:"time",class:"input w-full",required:""},null,512),[[b,c.value.hora_inicio]])])):m("",!0),c.value.es_disponible?(l(),t("div",Ae,[o[24]||(o[24]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Hora Fin ",-1)),p(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>c.value.hora_fin=s),type:"time",class:"input w-full",required:""},null,512),[[b,c.value.hora_fin]])])):m("",!0),e("div",Ne,[o[25]||(o[25]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Motivo (opcional) ",-1)),p(e("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>c.value.motivo=s),type:"text",class:"input w-full",placeholder:"Ej: Vacaciones, Día libre, etc."},null,512),[[b,c.value.motivo]])])]),e("div",{class:"flex gap-2 justify-end"},[e("button",{type:"button",onClick:N,class:"btn-secondary"}," Cancelar "),o[26]||(o[26]=e("button",{type:"submit",class:"btn-primary"}," Guardar Excepción ",-1))])],32)])):m("",!0),_.excepciones.length>0?(l(),t("div",Ue,[(l(!0),t(x,null,k(G.value,s=>(l(),t("div",{key:s.id,class:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"var(--bg-secondary)"}},[e("div",qe,[n(H,{variant:s.es_disponible?"success":"danger"},{default:v(()=>[y(i(s.fecha),1)]),_:2},1032,["variant"]),e("div",null,[e("p",De,[y(i(s.es_disponible?"Disponible":"No disponible")+" ",1),s.es_disponible&&s.hora_inicio?(l(),t("span",$e," ("+i(s.hora_inicio)+" - "+i(s.hora_fin)+") ",1)):m("",!0)]),s.motivo?(l(),t("p",Fe,i(s.motivo),1)):m("",!0)])]),e("button",{onClick:r=>q(s.id),class:"btn-danger btn-sm"},[n(f(I),{class:"w-4 h-4"})],8,Me)]))),128))])):C.value?m("",!0):(l(),t("div",Be," No hay excepciones configuradas. "))]),_:1})])),d.value.mostrar?(l(),t("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:g(E,["self"])},[n(w,{class:"w-full max-w-md"},{default:v(()=>[e("h3",Ge,i(d.value.editando?"Editar Horario":"Nuevo Horario"),1),e("form",{onSubmit:g(T,["prevent"]),class:"space-y-4"},[d.value.editando?m("",!0):(l(),t("div",ze,[o[29]||(o[29]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Día de la Semana ",-1)),p(e("select",{"onUpdate:modelValue":o[6]||(o[6]=s=>d.value.form.dia_semana=s),class:"input w-full",required:""},[...o[28]||(o[28]=[e("option",{value:""},"Selecciona un día",-1),e("option",{value:"1"},"Lunes",-1),e("option",{value:"2"},"Martes",-1),e("option",{value:"3"},"Miércoles",-1),e("option",{value:"4"},"Jueves",-1),e("option",{value:"5"},"Viernes",-1),e("option",{value:"6"},"Sábado",-1),e("option",{value:"7"},"Domingo",-1)])],512),[[j,d.value.form.dia_semana]])])),e("div",null,[o[30]||(o[30]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Hora Inicio ",-1)),p(e("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>d.value.form.hora_inicio=s),type:"time",class:"input w-full",required:""},null,512),[[b,d.value.form.hora_inicio]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Hora Fin ",-1)),p(e("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>d.value.form.hora_fin=s),type:"time",class:"input w-full",required:""},null,512),[[b,d.value.form.hora_fin]])]),e("div",Le,[e("button",{type:"button",onClick:E,class:"btn-secondary"}," Cancelar "),e("button",Oe,i(d.value.editando?"Actualizar":"Guardar"),1)])],32)]),_:1})])):m("",!0),u.value.mostrar?(l(),t("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:g(V,["self"])},[n(w,{class:"w-full max-w-md"},{default:v(()=>[o[39]||(o[39]=e("h3",{class:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"}}," Nueva Excepción ",-1)),e("form",{onSubmit:g(K,["prevent"]),class:"space-y-4"},[e("div",null,[o[32]||(o[32]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Fecha ",-1)),p(e("input",{"onUpdate:modelValue":o[9]||(o[9]=s=>u.value.form.fecha=s),type:"date",class:"input w-full",required:""},null,512),[[b,u.value.form.fecha]])]),e("div",null,[o[34]||(o[34]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Estado ",-1)),p(e("select",{"onUpdate:modelValue":o[10]||(o[10]=s=>u.value.form.es_disponible=s),class:"input w-full",required:""},[...o[33]||(o[33]=[e("option",{value:!1},"No disponible",-1),e("option",{value:!0},"Disponible con horario especial",-1)])],512),[[j,u.value.form.es_disponible]])]),u.value.form.es_disponible?(l(),t("div",Te,[o[35]||(o[35]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Hora Inicio ",-1)),p(e("input",{"onUpdate:modelValue":o[11]||(o[11]=s=>u.value.form.hora_inicio=s),type:"time",class:"input w-full",required:""},null,512),[[b,u.value.form.hora_inicio]])])):m("",!0),u.value.form.es_disponible?(l(),t("div",Je,[o[36]||(o[36]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Hora Fin ",-1)),p(e("input",{"onUpdate:modelValue":o[12]||(o[12]=s=>u.value.form.hora_fin=s),type:"time",class:"input w-full",required:""},null,512),[[b,u.value.form.hora_fin]])])):m("",!0),e("div",null,[o[37]||(o[37]=e("label",{class:"block mb-2",style:{color:"var(--text-primary)"}}," Motivo (opcional) ",-1)),p(e("input",{"onUpdate:modelValue":o[13]||(o[13]=s=>u.value.form.motivo=s),type:"text",class:"input w-full",placeholder:"Ej: Vacaciones, Día libre, etc."},null,512),[[b,u.value.form.motivo]])]),e("div",{class:"flex gap-2 justify-end"},[e("button",{type:"button",onClick:V,class:"btn-secondary"}," Cancelar "),o[38]||(o[38]=e("button",{type:"submit",class:"btn-primary"}," Guardar ",-1))])],32)]),_:1})])):m("",!0)]),_:1})],64))}};export{Ze as default};
